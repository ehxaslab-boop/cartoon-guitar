<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cartoon Guitar Coach</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --bg-alt: #0b1020;
      --accent: #ff6b4a;
      --accent-soft: #ffb89f;
      --card: #111827;
      --text: #f9fafb;
      --muted: #9ca3af;
      --ok: #4ade80;
      --warn: #facc15;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 60%);
      color: var(--text);
    }
    header {
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #1f2937;
      background: rgba(3,7,18,0.92);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
      z-index: 50;
    }
    header h1 {
      font-size: 1.1rem;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    header h1 span.logo-icon {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffffff, #f97316 35%, #7c2d12 75%);
      box-shadow: 0 0 18px rgba(248, 113, 113, 0.7);
      position: relative;
    }
    header h1 span.logo-icon::after {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 50%;
      border: 2px solid rgba(15,23,42,0.9);
    }
    nav {
      display: flex;
      gap: 8px;
    }
    nav button {
      background: transparent;
      border: 1px solid #374151;
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      cursor: pointer;
    }
    nav button.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #020617;
      font-weight: 600;
    }
    main {
      max-width: 1080px;
      margin: 0 auto;
      padding: 16px;
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(260px, 1fr);
      gap: 16px;
    }
    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top left, #111827, #020617 70%);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid rgba(55,65,81,0.7);
      box-shadow: 0 20px 50px rgba(15,23,42,0.8);
    }
    .card h2 {
      margin: 0 0 8px;
      font-size: 1rem;
    }
    .card p {
      margin: 4px 0;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.8);
      font-size: 0.75rem;
      color: var(--muted);
      border: 1px solid #1f2937;
    }
    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--ok);
      box-shadow: 0 0 6px rgba(74,222,128,0.9);
    }

    .xp-bar {
      height: 8px;
      border-radius: 999px;
      background: #020617;
      overflow: hidden;
      border: 1px solid #111827;
      margin-top: 8px;
    }
    .xp-fill {
      height: 100%;
      width: 40%;
      border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #facc15, #f97316);
      box-shadow: 0 0 12px rgba(250, 204, 21, 0.9);
    }

    .today-goals {
      display: grid;
      gap: 8px;
      margin-top: 10px;
    }
    .goal-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(15,23,42,0.9);
      border: 1px solid #111827;
      font-size: 0.85rem;
    }
    .goal-item span.label {
      color: var(--muted);
    }
    .goal-item button {
      border-radius: 999px;
      border: 1px solid #374151;
      background: transparent;
      color: var(--text);
      padding: 3px 10px;
      font-size: 0.75rem;
      cursor: pointer;
    }

    .missions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .mission-card {
      background: rgba(15,23,42,0.96);
      border-radius: 12px;
      padding: 10px;
      border: 1px solid #1f2937;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, border 0.1s ease;
    }
    .mission-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(15,23,42,0.9);
      border-color: var(--accent-soft);
    }
    .mission-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.85rem;
      margin-bottom: 4px;
    }
    .mission-tag {
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(248, 113, 113, 0.15);
      color: var(--accent-soft);
    }
    .mission-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .mission-desc {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }
    .tool-card {
      background: rgba(15,23,42,0.95);
      border-radius: 14px;
      padding: 10px;
      border: 1px solid #1f2937;
      font-size: 0.85rem;
    }

    .btn-primary {
      background: var(--accent);
      border: none;
      color: #020617;
      padding: 8px 13px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(248, 113, 113, 0.5);
    }
    .btn-primary:hover {
      filter: brightness(1.05);
    }

    .metronome-controls {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
      flex-wrap: wrap;
    }
    .metronome-controls input {
      width: 80px;
      background: #020617;
      border-radius: 999px;
      border: 1px solid #374151;
      padding: 4px 8px;
      color: var(--text);
      font-size: 0.8rem;
    }
    .metronome-controls button {
      border-radius: 999px;
      border: 1px solid #374151;
      background: rgba(15,23,42,0.9);
      color: var(--text);
      padding: 4px 10px;
      font-size: 0.8rem;
      cursor: pointer;
    }

    .cartoon-panel {
      position: sticky;
      top: 64px;
    }
    .cartoon-hero {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 8px;
    }
    .cartoon-avatar {
      width: 70px;
      height: 70px;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 0 28px rgba(248, 113, 113, 0.7);
    }
    .cartoon-text {
      font-size: 0.9rem;
      color: var(--muted);
    }
    .speech-bubble {
      margin-top: 8px;
      background: rgba(15,23,42,0.98);
      border-radius: 14px;
      padding: 10px;
      border: 1px solid #1f2937;
      font-size: 0.85rem;
      position: relative;
    }
    .speech-bubble::before {
      content: "";
      position: absolute;
      left: 14px;
      top: -8px;
      border-width: 0 8px 8px 8px;
      border-style: solid;
      border-color: transparent transparent rgba(15,23,42,0.98) transparent;
    }
    .speech-footer {
      margin-top: 6px;
      font-size: 0.75rem;
      color: var(--accent-soft);
    }

    .list-compact {
      margin: 6px 0 0 14px;
      padding: 0;
      font-size: 0.8rem;
      color: var(--muted);
    }
    .list-compact li { margin-bottom: 3px; }
  </style>
</head>
<body>

<!-- AUDIO LOOPS (you upload the files into /audio/) -->
<audio id="loop_gc" src="audio/gc_loop.mp3" loop></audio>
<audio id="loop_drums_slow" src="audio/drums_slow.mp3" loop></audio>
<audio id="loop_drums_mid" src="audio/drums_mid.mp3" loop></audio>

<header>
  <h1>
    <span class="logo-icon"></span>
    Cartoon Guitar Coach
  </h1>
  <nav>
    <button class="active" data-view="dashboard">Dashboard</button>
    <button data-view="missions">Missions</button>
    <button data-view="tools">Tools</button>
    <button data-view="library">Library</button>
  </nav>
</header>

<main>
  <!-- LEFT SIDE: MAIN VIEW -->
  <section id="view-dashboard" class="card">
    <div class="pill">
      <span class="pill-dot"></span>
      Day 1 ¬∑ Beginner Path
    </div>
    <h2>Welcome, bandmate üëã</h2>
    <p>You‚Äôre starting a beginner path that teaches real guitar and music fundamentals in tiny, focused missions.</p>

    <div class="xp-bar">
      <div class="xp-fill" id="xpFill"></div>
    </div>
    <p style="font-size:0.8rem;margin-top:4px;color:var(--muted);">
      XP: <span id="xpScore">40</span> ¬∑ Streak: <span id="streakDays">1</span> day
    </p>

    <h3 style="margin-top:14px;font-size:0.9rem;">Today‚Äôs focus</h3>
    <div class="today-goals">
      <div class="goal-item">
        <div>
          <div>Finish 2 missions</div>
          <span class="label">G chord ¬∑ Timing basics</span>
        </div>
        <button onclick="goMissions()">Start</button>
      </div>
      <div class="goal-item">
        <div>
          <div>Play with the metronome</div>
          <span class="label">8 bars at 70 BPM</span>
        </div>
        <button onclick="goTools()">Open</button>
      </div>
      <div class="goal-item">
        <div>
          <div>Learn 1 riff</div>
          <span class="label">Two‚Äëchord groove</span>
        </div>
        <button onclick="goLibrary()">Try</button>
      </div>
    </div>
  </section>

  <section id="view-missions" class="card" style="display:none;">
    <div class="pill">
      <span class="pill-dot"></span>
      Quest 1 ¬∑ Speak Music & First Chords
    </div>
    <h2>Beginner missions</h2>
    <p>Each mission is 5‚Äì10 minutes. Do them in order the first time.</p>

    <div class="missions-grid">
      <div class="mission-card" onclick="selectMission('pulse')">
        <div class="mission-header">
          <span>Mission 1</span>
          <span class="mission-tag">Timing</span>
        </div>
        <div class="mission-title">Feel the Pulse</div>
        <div class="mission-desc">
          Clap and strum in time with a click.
          <br>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); startDrums('slow');">
            Play slow drums
          </button>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); stopAllAudio();">
            Stop
          </button>
        </div>
      </div>

      <div class="mission-card" onclick="selectMission('gChord')">
        <div class="mission-header">
          <span>Mission 2</span>
          <span class="mission-tag">Chords</span>
        </div>
        <div class="mission-title">Your First G Chord</div>
        <div class="mission-desc">
          Learn a clean G chord and switch from open strings to G in tempo.
          <br>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); startMetronome();">
            Metronome
          </button>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); stopAllAudio();">
            Stop
          </button>
        </div>
      </div>

      <div class="mission-card" onclick="selectMission('switchGC')">
        <div class="mission-header">
          <span>Mission 3</span>
          <span class="mission-tag">Chords</span>
        </div>
        <div class="mission-title">Switch G ‚Üî C</div>
        <div class="mission-desc">
          Practice G‚ÄìC changes with a loop.
          <br>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); startLoop('loop_gc');">
            Play G‚ÄìC loop
          </button>
          <button style="margin-top:4px;font-size:0.7rem;" onclick="event.stopPropagation(); stopAllAudio();">
            Stop
          </button>
        </div>
      </div>

      <div class="mission-card" onclick="selectMission('notesEA')">
        <div class="mission-header">
          <span>Mission 4</span>
          <span class="mission-tag">Fretboard</span>
        </div>
        <div class="mission-title">Find the Notes</div>
        <div class="mission-desc">
          Learn the note names on the low E and A strings with quick prompts.
        </div>
      </div>
    </div>

    <div id="missionDetail" style="margin-top:14px;font-size:0.85rem;color:var(--muted);"></div>
  </section>

  <section id="view-tools" class="card" style="display:none;">
    <div class="pill">
      <span class="pill-dot"></span>
      Practice Tools
    </div>
    <h2>Tuner & metronome</h2>
    <p>Use these on every session: tune up, then lock in your timing.</p>

    <div class="tools-grid">
      <div class="tool-card">
        <strong>Tuner (basic)</strong>
        <p style="margin-top:4px;">
          For now, tune to standard: E‚ÄìA‚ÄìD‚ÄìG‚ÄìB‚ÄìE. Use a clip‚Äëon tuner or tuning app, then come back here.
        </p>
        <ul class="list-compact">
          <li>Step 1 ‚Äì Tune low E string.</li>
          <li>Step 2 ‚Äì Match the rest of the strings.</li>
          <li>Step 3 ‚Äì Strum a G chord and adjust until it sounds smooth.</li>
        </ul>
      </div>

      <div class="tool-card">
        <strong>Metronome</strong>
        <p style="margin-top:4px;">Set a tempo and play along. Start slow. Slow = clean.</p>
        <div class="metronome-controls">
          <label for="bpmInput" style="font-size:0.8rem;">BPM:</label>
          <input type="number" id="bpmInput" value="70" min="40" max="200" />
          <button onclick="startMetronome()">Start</button>
          <button onclick="stopMetronome()">Stop</button>
        </div>
        <p id="metronomeStatus" style="font-size:0.8rem;margin-top:6px;color:var(--muted);">
          Metronome stopped.
        </p>
      </div>
    </div>
  </section>

  <section id="view-library" class="card" style="display:none;">
    <div class="pill">
      <span class="pill-dot"></span>
      Chords & Riffs
    </div>
    <h2>Beginner library</h2>
    <p>These chords and riffs show up in tons of songs.</p>

    <div class="tools-grid">
      <div class="tool-card">
        <strong>Essential open chords</strong>
        <ul class="list-compact">
          <li>G major ‚Äì Your first ‚Äúbig‚Äù chord. Use in Mission 2 and 3.</li>
          <li>C major ‚Äì Pairs with G for simple songs.</li>
          <li>D major ‚Äì Bright chord; adds variety later.</li>
          <li>Em ‚Äì Easiest minor chord, sounds great with G and D.</li>
        </ul>
        <p style="margin-top:6px;">
          Aim for clean sound: every string rings, no buzzing.
        </p>
      </div>
      <div class="tool-card">
        <strong>Two‚Äëchord groove (G‚ÄìC)</strong>
        <p style="margin-top:4px;">Try this pattern with the loop or metronome:</p>
        <ul class="list-compact">
          <li>Strum G: down‚Äìdown‚Äìup‚Äìup‚Äìdown‚Äìup (4 beats).</li>
          <li>Switch to C and repeat.</li>
          <li>Loop for 2‚Äì4 minutes.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- RIGHT SIDE: CARTOON INSTRUCTOR -->
  <aside class="cartoon-panel">
    <div class="card">
      <div class="cartoon-hero">
        <div class="cartoon-avatar">
          <!-- Replace riff_neon.png with your actual file name in the repo -->
          <img src="riff_neon.png" alt="Riff, your neon street guitar coach"
               style="width:100%;height:100%;object-fit:cover;border-radius:18px;">
        </div>
        <div class="cartoon-text">
          <strong style="font-size:0.9rem;">Riff</strong> ¬∑ your neon street guitar coach
          <p style="margin:2px 0 0;font-size:0.8rem;">
            ‚ÄúNo fluff. We make your playing sound expensive, one tiny mission at a time.‚Äù
          </p>
        </div>
      </div>

      <div class="speech-bubble" id="speechBubble">
        <div id="speechText">
          Start with Mission 1 to lock in your timing, then Mission 2 to make that G chord ring.
        </div>
        <div class="speech-footer">
          Riff says: slow and clean beats fast and messy every time.
        </div>
      </div>

      <button class="btn-primary" style="margin-top:10px;" onclick="suggestNextMission()">
        What should I do next?
      </button>
    </div>
  </aside>
</main>

<script>
  const navButtons = document.querySelectorAll("nav button");
  const views = {
    dashboard: document.getElementById("view-dashboard"),
    missions: document.getElementById("view-missions"),
    tools: document.getElementById("view-tools"),
    library: document.getElementById("view-library"),
  };
  const speechText = document.getElementById("speechText");
  let currentView = "dashboard";
  let currentMission = null;

  navButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const view = btn.getAttribute("data-view");
      switchView(view);
    });
  });

  function switchView(view) {
    currentView = view;
    Object.values(views).forEach(v => (v.style.display = "none"));
    views[view].style.display = "block";
    navButtons.forEach(btn => {
      btn.classList.toggle("active", btn.getAttribute("data-view") === view);
    });
    updateSpeechForView();
  }

  function goMissions() { switchView("missions"); }
  function goTools() { switchView("tools"); }
  function goLibrary() { switchView("library"); }

  function updateSpeechForView() {
    if (currentView === "dashboard") {
      speechText.textContent =
        "Two small wins today. Nail your timing, then make that G chord sound expensive.";
    } else if (currentView === "missions") {
      speechText.textContent =
        "Pick the next mission. No scrolling, no fluff ‚Äì just play.";
    } else if (currentView === "tools") {
      speechText.textContent =
        "Tune up, then let the metronome and loops boss your strumming for a few minutes.";
    } else if (currentView === "library") {
      speechText.textContent =
        "These chords and riffs are your starter pack. Master them and songs get way easier.";
    }
  }

  function selectMission(id) {
    currentMission = id;
    const detail = document.getElementById("missionDetail");
    let html = "";
    if (id === "pulse") {
      html = `
        <h3>Mission 1 ¬∑ Feel the Pulse</h3>
        <p><strong>Goal:</strong> Clap and strum in time for 8 bars without drifting.</p>
        <ol class="list-compact">
          <li>Hit ‚ÄúPlay slow drums‚Äù on the card.</li>
          <li>Clap on every kick/snare for 1‚Äì2 minutes.</li>
          <li>Mute the strings and strum down on every beat.</li>
          <li>Alternate 4 bars of clapping, 4 bars of strumming.</li>
        </ol>
      `;
      speechText.textContent = "Lock that groove in. If it feels wild, you‚Äôre probably too fast.";
    } else if (id === "gChord") {
      html = `
        <h3>Mission 2 ¬∑ Your First G Chord</h3>
        <p><strong>Goal:</strong> Play a clean G chord 10 times in a row.</p>
        <ol class="list-compact">
          <li>Place your fingers for G (use your usual fingering).</li>
          <li>Pluck each string one by one. Fix any buzz or mute.</li>
          <li>Strum down slowly 10 times, all strings ringing.</li>
          <li>Turn on the metronome at 60‚Äì70 BPM and strum once per beat for 8 bars.</li>
        </ol>
      `;
      speechText.textContent = "Make that G chord sparkle. Tone first, speed later.";
    } else if (id === "switchGC") {
      html = `
        <h3>Mission 3 ¬∑ Switch G ‚Üî C</h3>
        <p><strong>Goal:</strong> Switch between G and C smoothly 3 times in a row over the loop.</p>
        <ol class="list-compact">
          <li>Practice slow switches G ‚Üí C without sound first.</li>
          <li>Hit ‚ÄúPlay G‚ÄìC loop‚Äù on the card.</li>
          <li>Strum G for 4 beats, switch to C for 4 beats.</li>
          <li>Repeat until you get 3 clean switches in a row.</li>
        </ol>
      `;
      speechText.textContent = "Smooth switches > fast switches. Clean it up, then we speed it up.";
    } else if (id === "notesEA") {
      html = `
        <h3>Mission 4 ¬∑ Find the Notes (E & A strings)</h3>
        <p><strong>Goal:</strong> Instantly find G, A, C, and D on low E and A strings.</p>
        <ol class="list-compact">
          <li>Memorize: Low E ‚Äì 3rd fret G, 5th fret A; A string ‚Äì 3rd fret C, 5th fret D.</li>
          <li>Say the note name, then play it 2‚Äì3 times each.</li>
          <li>Mix them up: call out G, A, C, or D in your head, find it fast.</li>
          <li>Bonus: play a slow groove on one of those notes with the drums.</li>
        </ol>
      `;
      speechText.textContent = "These four notes are your entry ticket to the fretboard. Get them automatic.";
    }
    detail.innerHTML = html;
  }

  // Metronome
  let metronomeTimer = null;
  let audioCtx = null;

  function clickSound() {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.frequency.value = 1000;
    gain.gain.setValueAtTime(0.0001, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.2, audioCtx.currentTime + 0.001);
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.08);
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.1);
  }

  function startMetronome() {
    const bpmInput = document.getElementById("bpmInput");
    let bpm = parseInt(bpmInput.value, 10);
    if (isNaN(bpm) || bpm < 40) bpm = 40;
    if (bpm > 200) bpm = 200;
    const interval = (60 / bpm) * 1000;
    stopMetronome();
    clickSound();
    metronomeTimer = setInterval(clickSound, interval);
    document.getElementById("metronomeStatus").textContent =
      "Metronome running at " + bpm + " BPM.";
  }

  function stopMetronome() {
    if (metronomeTimer) {
      clearInterval(metronomeTimer);
      metronomeTimer = null;
    }
    document.getElementById("metronomeStatus").textContent = "Metronome stopped.";
  }

  // Loops
  function stopAllAudio() {
    stopMetronome();
    ['loop_gc','loop_drums_slow','loop_drums_mid'].forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        el.pause();
        el.currentTime = 0;
      }
    });
  }

  function startLoop(id) {
    stopAllAudio();
    const el = document.getElementById(id);
    if (el) {
      el.play();
      document.getElementById("metronomeStatus").textContent = "Playing loop: " + id;
    }
  }

  function startDrums(speed) {
    if (speed === 'slow') startLoop('loop_drums_slow');
    else startLoop('loop_drums_mid');
  }

  function suggestNextMission() {
    if (currentView === "missions") {
      if (!currentMission) {
        speechText.textContent = "Start with Mission 1, then 2. Timing first, then chords. Always.";
      } else if (currentMission === "pulse") {
        speechText.textContent = "Groove locked? Slide into Mission 2 and make that G chord ring.";
      } else if (currentMission === "gChord") {
        speechText.textContent = "G is sounding good. Hit Mission 3 and make G ‚Üî C feel easy.";
      } else {
        speechText.textContent =
          "Repeat any mission that still feels shaky. Clean repetitions are where the gains live.";
      }
    } else if (currentView === "dashboard") {
      speechText.textContent =
        "Tap ‚ÄòFinish 2 missions‚Äô and we‚Äôll walk through them. Two tight reps beat one long grind.";
    } else if (currentView === "tools") {
      speechText.textContent =
        "Use the metronome for 5 minutes, then hit Missions to use that timing on chords.";
    } else {
      speechText.textContent =
        "Grab one chord or riff from the library and play it 20 times. Boring? Good. That‚Äôs progress.";
    }
  }
</script>
</body>
</html>
